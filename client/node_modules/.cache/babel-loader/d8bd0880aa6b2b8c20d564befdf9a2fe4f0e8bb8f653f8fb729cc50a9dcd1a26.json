{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/lenovo/Desktop/bookApp/diary/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/lenovo/Desktop/bookApp/diary/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/lenovo/Desktop/bookApp/diary/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./singlePost.css\";import{useContext,useEffect,useState}from\"react\";import{useLocation}from\"react-router-dom\";import{Context}from\"../../context/Context\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function SinglePost(){var location=useLocation();var path=location.pathname.split(\"/\")[2];var _useState=useState({}),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var PF=\"http://localhost:5000/images/\";var _useContext=useContext(Context),user=_useContext.user;var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),author=_useState6[0],setAuthor=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),summary=_useState8[0],setSummary=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),update=_useState10[0],setUpdate=_useState10[1];useEffect(function(){var getPost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/posts/\"+path);case 2:res=_context.sent;setPost(res.data);setTitle(res.data.title);setAuthor(res.data.author);setSummary(res.data.summary);case 7:case\"end\":return _context.stop();}},_callee);}));return function getPost(){return _ref.apply(this,arguments);};}();getPost();},[path]);var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.delete(\"/posts/\".concat(post._id),{data:{username:user.username}});case 3:window.location.replace(\"/\");_context2.next=8;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);case 8:case\"end\":return _context2.stop();}},_callee2,null,[[0,6]]);}));return function handleDelete(){return _ref2.apply(this,arguments);};}();var handleUpdate=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.put(\"/posts/\".concat(post._id),{username:user.username,title:title,author:author,summary:summary});case 3:setUpdate(false);_context3.next=8;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);case 8:case\"end\":return _context3.stop();}},_callee3,null,[[0,6]]);}));return function handleUpdate(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"singlePost\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"card h-100 postCol\",children:[post.photo&&/*#__PURE__*/_jsx(\"img\",{src:PF+post.photo,alt:\"\",className:\"singlePostImg\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"card-body\",children:[update?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:title,className:\"singlePostTitleInput\",autoFocus:true,onChange:function onChange(e){return setTitle(e.target.value);}}):/*#__PURE__*/_jsx(\"h6\",{className:\"singlePostTitle\",children:title}),update?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:author,className:\"singlePostAuthorInput\",autoFocus:true,onChange:function onChange(e){return setAuthor(e.target.value);}}):/*#__PURE__*/_jsx(\"h6\",{className:\"singlePostAuthor\",children:author}),update?/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",value:summary,className:\"singlePostTextInput\",autoFocus:true,onChange:function onChange(e){return setSummary(e.target.value);}}):/*#__PURE__*/_jsx(\"h6\",{className:\"singlePostText\",children:summary})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cardButtons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"cardButton\",onClick:function onClick(){return setUpdate(true);},children:\"G\\xFCncelle\"}),/*#__PURE__*/_jsx(\"button\",{className:\"cardButton\",onClick:handleDelete,children:\"Sil\"}),/*#__PURE__*/_jsx(\"button\",{className:\"cardButton\",onClick:handleUpdate,children:\"Kaydet\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-footer\",children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-body-success\",children:[new Date(post.createdAt).toDateString(),\" \"]})})]})})})});}","map":{"version":3,"names":["useContext","useEffect","useState","useLocation","Context","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SinglePost","location","path","pathname","split","_useState","_useState2","_slicedToArray","post","setPost","PF","_useContext","user","_useState3","_useState4","title","setTitle","_useState5","_useState6","author","setAuthor","_useState7","_useState8","summary","setSummary","_useState9","_useState10","update","setUpdate","getPost","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","get","sent","data","stop","apply","arguments","handleDelete","_ref2","_callee2","_callee2$","_context2","delete","concat","_id","username","window","replace","t0","handleUpdate","_ref3","_callee3","_callee3$","_context3","put","children","className","class","photo","src","alt","type","value","autoFocus","onChange","e","target","onClick","Date","createdAt","toDateString"],"sources":["C:/Users/lenovo/Desktop/bookApp/diary/src/components/singlePost/SinglePost.jsx"],"sourcesContent":["import \"./singlePost.css\"\r\nimport { useContext, useEffect, useState } from \"react\";\r\n\r\nimport { useLocation } from \"react-router-dom\"\r\nimport { Context } from \"../../context/Context\";\r\nimport axios from \"axios\";\r\n\r\nexport default function SinglePost() {\r\n    const location = useLocation();\r\n    const path = location.pathname.split(\"/\")[2];\r\n    const [post, setPost] = useState({});\r\n    const PF = \"http://localhost:5000/images/\";\r\n    const { user } = useContext(Context);\r\n    const [title, setTitle] = useState(\"\");\r\n    const [author, setAuthor] = useState(\"\");\r\n    const [summary, setSummary] = useState(\"\");\r\n    const [update, setUpdate] = useState(false);\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        const getPost = async () => {\r\n            const res = await axios.get(\"/posts/\" + path);\r\n            setPost(res.data)\r\n            setTitle(res.data.title);\r\n            setAuthor(res.data.author);\r\n            setSummary(res.data.summary);\r\n        };\r\n        getPost();\r\n    }, [path]);\r\n\r\n\r\n\r\n\r\n\r\n\r\n    const handleDelete = async () => {\r\n        try{\r\n            await axios.delete(`/posts/${post._id}`, {\r\n                data: {username: user.username}\r\n            })\r\n            window.location.replace(\"/\")\r\n           \r\n    } catch(err){\r\n        \r\n       \r\n    }\r\n    }\r\n\r\n    const handleUpdate = async () => {\r\n        try {\r\n            await axios.put(`/posts/${post._id}`, {\r\n                username: user.username, title, author, summary\r\n            })\r\n\r\n            setUpdate(false)\r\n        } catch(err) {\r\n\r\n        }\r\n    }\r\n\r\n\r\n\r\n  return (\r\n    <>\r\n     <div className='singlePost'>\r\n \r\n <div className=\"col\">\r\n   <div class=\"card h-100 postCol\">\r\n   {post.photo && (\r\n    <img src={PF + post.photo}\r\n    alt=\"\"\r\n    className=\"singlePostImg\" />\r\n   )}\r\n        \r\n          \r\n     <div class=\"card-body\">\r\n    \r\n      {update ? <input type=\"text\" value={title} \r\n      className=\"singlePostTitleInput\" \r\n      autoFocus \r\n      onChange={(e) => setTitle(e.target.value)}/>:\r\n          (<h6 className=\"singlePostTitle\">\r\n                {title}\r\n                </h6>)}\r\n\r\n\r\n      {update ? <input type=\"text\" value={author} \r\n      className=\"singlePostAuthorInput\" \r\n      autoFocus \r\n      onChange={(e) => setAuthor(e.target.value)}/>:\r\n          (<h6 className=\"singlePostAuthor\">\r\n                {author}\r\n                </h6>)}  \r\n\r\n      {update ? <textarea type=\"text\" value={summary} \r\n      className=\"singlePostTextInput\" \r\n      autoFocus \r\n      onChange={(e) => setSummary(e.target.value)}/>:\r\n          (<h6 className=\"singlePostText\">\r\n                {summary}\r\n                </h6>)}       \r\n      \r\n\r\n     </div>\r\n\r\n     <div className=\"cardButtons\">\r\n        <button className=\"cardButton\" onClick={() => setUpdate(true)}>GÃ¼ncelle</button>\r\n        <button className=\"cardButton\" onClick={handleDelete}>Sil</button>\r\n\r\n\r\n        <button className=\"cardButton\" onClick={handleUpdate}>Kaydet</button>\r\n     </div>\r\n     <div className=\"card-footer\">\r\n             <small className=\"text-body-success\">{new Date(post.createdAt).toDateString()} </small>\r\n           </div>\r\n\r\n </div>\r\n </div>\r\n </div>\r\n </>)}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}