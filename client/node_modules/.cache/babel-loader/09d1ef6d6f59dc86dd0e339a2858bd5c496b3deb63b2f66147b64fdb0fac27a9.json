{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/lenovo/Desktop/bookApp/diary/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/lenovo/Desktop/bookApp/diary/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/lenovo/Desktop/bookApp/diary/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./write.css\";import Header from\"../../components/header/Header\";import{useState}from\"react\";import{useContext}from\"react\";import{Context}from\"../../context/Context\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Write(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),author=_useState4[0],setAuthor=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),summary=_useState6[0],setSummary=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),file=_useState8[0],setFile=_useState8[1];var _useContext=useContext(Context),user=_useContext.user;var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var newPost,data,filename,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();newPost={username:user.username,title:title,author:author,summary:summary};if(!file){_context.next=15;break;}data=new FormData();filename=Date.now()+file.name;data.append(\"name\",filename);data.append(\"file\",file);newPost.photo=filename;_context.prev=8;_context.next=11;return axios.post(\"/upload\",data);case 11:_context.next=15;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](8);case 15:_context.prev=15;_context.next=18;return axios.post(\"/posts\",newPost);case 18:res=_context.sent;window.location.replace(\"/post/\"+res.data._id);_context.next=24;break;case 22:_context.prev=22;_context.t1=_context[\"catch\"](15);case 24:case\"end\":return _context.stop();}},_callee,null,[[8,13],[15,22]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"write\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"writeTitle\",children:\"Kitap Ekle + \"}),/*#__PURE__*/_jsx(\"p\",{className:\"writeInfo\",children:\"Kitab\\u0131n\\u0131z\\u0131n \\xF6zetini yazarken, l\\xFCtfen 5N 1K sorular\\u0131n\\u0131 yan\\u0131tlayarak yazmaya \\xF6zen g\\xF6steriniz..\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"writeFormBox\",children:[file&&/*#__PURE__*/_jsx(\"img\",{className:\"writeImg\",src:URL.createObjectURL(file),alt:\"\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"writeForm\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"writeFormGroup\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fileInput\",children:/*#__PURE__*/_jsx(\"i\",{className:\"writeIcon \",children:\"Resim EKLE + \"})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"fileInput\",style:{display:\"none\"},onChange:function onChange(e){return setFile(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"writeBookTitle\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Kitab\\u0131n Ad\\u0131\",className:\"writeInput\",autoFocus:true,onChange:function onChange(e){return setTitle(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"writeBookAuthor\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Kitab\\u0131n Yazar\\u0131\",className:\"writeInput\",onChange:function onChange(e){return setAuthor(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"writeFormGroup\",children:/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Kitab\\u0131n \\xD6zeti...\",type:\"text\",className:\"writeInput writeText\",onChange:function onChange(e){return setSummary(e.target.value);}})}),/*#__PURE__*/_jsx(\"button\",{className:\"writeSubmit\",type:\"submit\",children:\"Kaydet\"})]})]})]})]});}","map":{"version":3,"names":["Header","useState","useContext","Context","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Write","_useState","_useState2","_slicedToArray","title","setTitle","_useState3","_useState4","author","setAuthor","_useState5","_useState6","summary","setSummary","_useState7","_useState8","file","setFile","_useContext","user","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","newPost","data","filename","res","wrap","_callee$","_context","prev","next","preventDefault","username","FormData","Date","now","name","append","photo","post","t0","sent","window","location","replace","_id","t1","stop","_x","apply","arguments","children","className","src","URL","createObjectURL","alt","onSubmit","htmlFor","type","id","style","display","onChange","target","files","placeholder","autoFocus","value"],"sources":["C:/Users/lenovo/Desktop/bookApp/diary/src/pages/write/Write.jsx"],"sourcesContent":["import \"./write.css\"\r\nimport Header from \"../../components/header/Header\"\r\nimport { useState } from \"react\"\r\nimport { useContext } from \"react\";\r\nimport { Context } from \"../../context/Context\";\r\nimport axios from \"axios\";\r\n\r\n\r\nexport default function Write() {\r\n    const [title, setTitle] = useState(\"\")\r\n    const [author, setAuthor] = useState(\"\")\r\n    const [summary, setSummary] = useState(\"\");\r\n    const [file, setFile] = useState(null)\r\n    const {user} = useContext(Context)\r\n\r\n    const handleSubmit= async(e) => {\r\n        e.preventDefault();\r\n        const newPost = {\r\n            username:user.username,\r\n            title,\r\n            author,\r\n            summary\r\n        };\r\n        if(file){\r\n            const data =new FormData();\r\n            const filename = Date.now() + file.name;\r\n            data.append(\"name\", filename);\r\n            data.append(\"file\",file);\r\n            newPost.photo = filename;\r\n            try{\r\n                await axios.post(\"/upload\",data);\r\n\r\n            } catch(err) {}\r\n        }\r\n        try{\r\n           const res = await axios.post(\"/posts\",newPost)\r\n            window.location.replace(\"/post/\" + res.data._id)\r\n        } catch(err) {\r\n\r\n        }\r\n        \r\n    };\r\n\r\n\r\n\r\n\r\n  return (\r\n    <>\r\n    <Header/>\r\n    <div className=\"write\">\r\n        <div className=\"writeTitle\">Kitap Ekle + </div>\r\n        <p className=\"writeInfo\">Kitabınızın özetini yazarken, lütfen 5N 1K sorularını\r\n            yanıtlayarak yazmaya özen gösteriniz..\r\n        </p>\r\n\r\n        <div className=\"writeFormBox\">\r\n        {file && (<img className=\"writeImg\"\r\n        src={URL.createObjectURL(file)}\r\n        alt=\"\" />)}\r\n        \r\n        <form className=\"writeForm\" onSubmit={handleSubmit}>\r\n            <div className=\"writeFormGroup\">\r\n                <label htmlFor=\"fileInput\">\r\n                    <i className=\"writeIcon \">Resim EKLE + </i>\r\n                   \r\n                </label>\r\n                <input type=\"file\" id=\"fileInput\" style={{display:\"none\"}} onChange={e=>setFile(e.target.files[0])} />\r\n               \r\n            </div>\r\n            <div className=\"writeBookTitle\">\r\n            <input type=\"text\" placeholder=\"Kitabın Adı\" className=\"writeInput\"  autoFocus={true} onChange={e=>setTitle(e.target.value)}  />\r\n            </div>\r\n\r\n            <div className=\"writeBookAuthor\">\r\n            <input type=\"text\" placeholder=\"Kitabın Yazarı\" className=\"writeInput\"   onChange={e=>setAuthor(e.target.value)} />\r\n            </div>\r\n            \r\n            \r\n\r\n            <div className=\"writeFormGroup\">\r\n                <textarea placeholder=\"Kitabın Özeti...\" type=\"text\" className=\"writeInput writeText\"  onChange={e=>setSummary(e.target.value)} ></textarea>\r\n            </div>\r\n\r\n            <button className=\"writeSubmit\" type=\"submit\">\r\n                Kaydet\r\n            </button>\r\n            \r\n        </form>\r\n\r\n        </div>\r\n        </div>\r\n    </>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}