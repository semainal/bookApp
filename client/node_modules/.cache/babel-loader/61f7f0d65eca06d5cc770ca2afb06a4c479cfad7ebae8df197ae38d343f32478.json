{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lenovo\\\\Desktop\\\\SEMA\\\\Yaz\\u0131l\\u0131m Denemeler\\\\bookApp\\\\client\\\\src\\\\components\\\\singlePost\\\\SinglePost.jsx\",\n  _s = $RefreshSig$();\nimport \"./singlePost.css\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport { Context } from \"../../context/Context\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function SinglePost() {\n  _s();\n  const location = useLocation();\n  const path = location.pathname.split(\"/\")[2];\n  const [post, setPost] = useState({});\n  const PF = \"http://localhost:5000/images/\";\n  const {\n    user\n  } = useContext(Context);\n  const [title, setTitle] = useState(\"\");\n  const [author, setAuthor] = useState(\"\");\n  const [summary, setSummary] = useState(\"\");\n  const [update, setUpdate] = useState(false);\n  useEffect(() => {\n    const getPost = async () => {\n      const res = await axios.get(\"/posts/\" + path);\n      setPost(res.data);\n      setTitle(res.data.title);\n      setAuthor(res.data.author);\n      setSummary(res.data.summary);\n    };\n    getPost();\n  }, [path]);\n  const handleDelete = async () => {\n    try {\n      await axios.delete(`/posts/${post._id}`, {\n        data: {\n          username: user.username\n        }\n      });\n      window.location.replace(\"/\");\n    } catch (err) {}\n  };\n  const handleUpdate = async () => {\n    try {\n      await axios.put(`/posts/${post._id}`, {\n        username: user.username,\n        title,\n        author,\n        summary\n      });\n      setUpdate(false);\n    } catch (err) {}\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"singlePost\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"card h-100 postCol\",\n          children: [post.photo && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: PF + post.photo,\n            alt: \"\",\n            className: \"singlePostImg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"card-body\",\n            children: [update ? /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: title,\n              className: \"singlePostTitleInput\",\n              autoFocus: true,\n              onChange: e => setTitle(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"h6\", {\n              className: \"singlePostTitle\",\n              children: title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 12\n            }, this), update ? /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: author,\n              className: \"singlePostAuthorInput\",\n              autoFocus: true,\n              onChange: e => setAuthor(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"h6\", {\n              className: \"singlePostAuthor\",\n              children: author\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 12\n            }, this), update ? /*#__PURE__*/_jsxDEV(\"textarea\", {\n              type: \"text\",\n              value: summary,\n              className: \"singlePostTextInput\",\n              autoFocus: true,\n              onChange: e => setSummary(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"h6\", {\n              className: \"singlePostText\",\n              children: summary\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 12\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cardButtons\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cardButton\",\n              onClick: () => setUpdate(true),\n              children: \"G\\xFCncelle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cardButton\",\n              onClick: handleDelete,\n              children: \"Sil\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cardButton\",\n              onClick: handleUpdate,\n              children: \"Kaydet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-footer\",\n            children: /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"text-body-success\",\n              children: [new Date(post.createdAt).toDateString(), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 14\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 6\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 4\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 2\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 6\n    }, this)\n  }, void 0, false);\n}\n_s(SinglePost, \"vBN3HOkrrJGY8o3usYiV0TAagpM=\", false, function () {\n  return [useLocation];\n});\n_c = SinglePost;\nvar _c;\n$RefreshReg$(_c, \"SinglePost\");","map":{"version":3,"names":["useContext","useEffect","useState","useLocation","Context","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","SinglePost","_s","location","path","pathname","split","post","setPost","PF","user","title","setTitle","author","setAuthor","summary","setSummary","update","setUpdate","getPost","res","get","data","handleDelete","delete","_id","username","window","replace","err","handleUpdate","put","children","className","class","photo","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","type","value","autoFocus","onChange","e","target","onClick","Date","createdAt","toDateString","_c","$RefreshReg$"],"sources":["C:/Users/lenovo/Desktop/SEMA/Yazılım Denemeler/bookApp/client/src/components/singlePost/SinglePost.jsx"],"sourcesContent":["import \"./singlePost.css\"\r\nimport { useContext, useEffect, useState } from \"react\";\r\n\r\nimport { useLocation } from \"react-router-dom\"\r\nimport { Context } from \"../../context/Context\";\r\nimport axios from \"axios\";\r\n\r\nexport default function SinglePost() {\r\n    const location = useLocation();\r\n    const path = location.pathname.split(\"/\")[2];\r\n    const [post, setPost] = useState({});\r\n    const PF = \"http://localhost:5000/images/\";\r\n    const { user } = useContext(Context);\r\n    const [title, setTitle] = useState(\"\");\r\n    const [author, setAuthor] = useState(\"\");\r\n    const [summary, setSummary] = useState(\"\");\r\n    const [update, setUpdate] = useState(false);\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        const getPost = async () => {\r\n            const res = await axios.get(\"/posts/\" + path);\r\n            setPost(res.data)\r\n            setTitle(res.data.title);\r\n            setAuthor(res.data.author);\r\n            setSummary(res.data.summary);\r\n        };\r\n        getPost();\r\n    }, [path]);\r\n\r\n\r\n\r\n\r\n\r\n\r\n    const handleDelete = async () => {\r\n        try{\r\n            await axios.delete(`/posts/${post._id}`, {\r\n                data: {username: user.username}\r\n            })\r\n            window.location.replace(\"/\")\r\n           \r\n    } catch(err){\r\n        \r\n       \r\n    }\r\n    }\r\n\r\n    const handleUpdate = async () => {\r\n        try {\r\n            await axios.put(`/posts/${post._id}`, {\r\n                username: user.username, title, author, summary\r\n            })\r\n\r\n            setUpdate(false)\r\n        } catch(err) {\r\n\r\n        }\r\n    }\r\n\r\n\r\n\r\n  return (\r\n    <>\r\n     <div className='singlePost'>\r\n \r\n <div className=\"col\">\r\n   <div class=\"card h-100 postCol\">\r\n   {post.photo && (\r\n    <img src={PF + post.photo}\r\n    alt=\"\"\r\n    className=\"singlePostImg\" />\r\n   )}\r\n        \r\n          \r\n     <div class=\"card-body\">\r\n    \r\n      {update ? <input type=\"text\" value={title} \r\n      className=\"singlePostTitleInput\" \r\n      autoFocus \r\n      onChange={(e) => setTitle(e.target.value)}/>:\r\n          (<h6 className=\"singlePostTitle\">\r\n                {title}\r\n                </h6>)}\r\n\r\n\r\n      {update ? <input type=\"text\" value={author} \r\n      className=\"singlePostAuthorInput\" \r\n      autoFocus \r\n      onChange={(e) => setAuthor(e.target.value)}/>:\r\n          (<h6 className=\"singlePostAuthor\">\r\n                {author}\r\n                </h6>)}  \r\n\r\n      {update ? <textarea type=\"text\" value={summary} \r\n      className=\"singlePostTextInput\" \r\n      autoFocus \r\n      onChange={(e) => setSummary(e.target.value)}/>:\r\n          (<h6 className=\"singlePostText\">\r\n                {summary}\r\n                </h6>)}       \r\n      \r\n\r\n     </div>\r\n\r\n     <div className=\"cardButtons\">\r\n        <button className=\"cardButton\" onClick={() => setUpdate(true)}>Güncelle</button>\r\n        <button className=\"cardButton\" onClick={handleDelete}>Sil</button>\r\n\r\n\r\n        <button className=\"cardButton\" onClick={handleUpdate}>Kaydet</button>\r\n     </div>\r\n     <div className=\"card-footer\">\r\n             <small className=\"text-body-success\">{new Date(post.createdAt).toDateString()} </small>\r\n           </div>\r\n\r\n </div>\r\n </div>\r\n </div>\r\n </>)}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}