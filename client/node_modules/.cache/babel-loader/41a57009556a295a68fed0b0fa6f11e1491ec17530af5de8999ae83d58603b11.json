{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/lenovo/Desktop/bookApp/diary/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/lenovo/Desktop/bookApp/diary/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/lenovo/Desktop/bookApp/diary/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./settings.css\";import Header from\"../../components/header/Header\";import{useState}from\"react\";import{useContext}from\"react\";import{Context}from\"../../context/Context\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Settings(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),success=_useState10[0],setSuccess=_useState10[1];var _useContext=useContext(Context),user=_useContext.user,dispatch=_useContext.dispatch;var PF=\"http://localhost:5000/images/\";var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var updatedUser,data,filename,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();dispatch({type:\"UPDATE_START\"});updatedUser={userId:user._id,username:username,email:email,password:password};if(!file){_context.next=16;break;}data=new FormData();filename=Date.now()+file.name;data.append(\"name\",filename);data.append(\"file\",file);updatedUser.profilePic=filename;_context.prev=9;_context.next=12;return axios.post(\"/upload\",data);case 12:_context.next=16;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](9);case 16:_context.prev=16;_context.next=19;return axios.put(\"/users/\"+user._id,updatedUser);case 19:res=_context.sent;setSuccess(true);dispatch({type:\"UPDATE_SUCCESS\",payload:res.data});_context.next=27;break;case 24:_context.prev=24;_context.t1=_context[\"catch\"](16);dispatch({type:\"UPDATE_FAILURE\"});case 27:case\"end\":return _context.stop();}},_callee,null,[[9,14],[16,24]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\"settings\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"settingsWrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"settingsTitle\",children:/*#__PURE__*/_jsx(\"span\",{className:\"settingsUpdateTitle\",children:\"Bilgilerini G\\xFCncelle\"})}),/*#__PURE__*/_jsxs(\"form\",{className:\"settingsForm\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"settingsPP\",children:[/*#__PURE__*/_jsx(\"img\",{src:file?URL.createObjectURL(file):PF+user.profilePic,alt:\"\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fileInput\",children:/*#__PURE__*/_jsx(\"i\",{className:\"settingsPPIcon fa-regular fa-circle-user\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"fileInput\",style:{display:\"none\"},onChange:function onChange(e){return setFile(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(\"label\",{className:\"settingsLabel\",children:\"Kullan\\u0131c\\u0131 Ad\\u0131\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:user.username,onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"settingsLabel\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:user.email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"settingsLabel\",children:\"\\u015Eifre\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"settingsSubmit\",type:\"submit\",children:\"G\\xFCncelle\"}),success&&/*#__PURE__*/_jsx(\"span\",{style:{color:\"green\",textAlign:\"center\",marginTop:\"20px\"},children:\"Profiliniz G\\xFCncellendi..\"}),/*#__PURE__*/_jsx(\"span\",{className:\"settingsDeleteTitle\",children:\"Hesab\\u0131 Sil\"})]})]})})]});}","map":{"version":3,"names":["Header","useState","useContext","Context","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Settings","_useState","_useState2","_slicedToArray","file","setFile","_useState3","_useState4","username","setUsername","_useState5","_useState6","email","setEmail","_useState7","_useState8","password","setPassword","_useState9","_useState10","success","setSuccess","_useContext","user","dispatch","PF","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","updatedUser","data","filename","res","wrap","_callee$","_context","prev","next","preventDefault","type","userId","_id","FormData","Date","now","name","append","profilePic","post","t0","put","sent","payload","t1","stop","_x","apply","arguments","children","className","onSubmit","src","URL","createObjectURL","alt","htmlFor","id","style","display","onChange","target","files","placeholder","value","color","textAlign","marginTop"],"sources":["C:/Users/lenovo/Desktop/bookApp/diary/src/pages/settings/Settings.jsx"],"sourcesContent":["import \"./settings.css\"\r\nimport Header from \"../../components/header/Header\"\r\nimport { useState } from \"react\"\r\nimport { useContext } from \"react\"\r\nimport {Context} from \"../../context/Context\"\r\nimport axios from \"axios\"\r\n\r\nexport default function Settings() {\r\n  const [file, setFile] = useState(null)\r\n  const [username, setUsername] = useState(\"\")\r\n  const [email, setEmail] = useState(\"\")\r\n  const [password, setPassword] = useState(\"\")\r\n  const [success, setSuccess] = useState(false)\r\n\r\n  const {user , dispatch} = useContext(Context)\r\n  const PF = \"http://localhost:5000/images/\"\r\n\r\n  const handleSubmit= async(e) => {\r\n    e.preventDefault();\r\n    dispatch({type:\"UPDATE_START\"})\r\n    const updatedUser = {\r\n        userId:user._id,\r\n        username,email,password,\r\n    };\r\n    if(file){\r\n        const data =new FormData();\r\n        const filename = Date.now() + file.name;\r\n        data.append(\"name\", filename);\r\n        data.append(\"file\",file);\r\n        updatedUser.profilePic = filename;\r\n        try{\r\n            await axios.post(\"/upload\",data);\r\n            \r\n\r\n        } catch(err) {}\r\n    }\r\n    try{\r\n      const res=  await axios.put(\"/users/\" + user._id, updatedUser)\r\n       setSuccess(true);\r\n       dispatch({type:\"UPDATE_SUCCESS\", payload:res.data})\r\n\r\n    } catch(err) {\r\n      dispatch({type:\"UPDATE_FAILURE\"})\r\n    }\r\n    \r\n};\r\n\r\n  return (\r\n    <>\r\n    <Header/>\r\n    <div className=\"settings\">\r\n      <div className=\"settingsWrapper\">\r\n        <div className=\"settingsTitle\">\r\n            <span className=\"settingsUpdateTitle\">\r\n                Bilgilerini Güncelle\r\n            </span>\r\n           \r\n        </div>\r\n        <form className=\"settingsForm\" onSubmit={handleSubmit}>\r\n           \r\n            <div className=\"settingsPP\">\r\n                <img \r\n                src={file ? URL.createObjectURL(file) : PF+ user.profilePic}\r\n                alt=\"\" \r\n                />\r\n                <label htmlFor=\"fileInput\">\r\n                    <i className=\"settingsPPIcon fa-regular fa-circle-user\"></i>\r\n                </label>\r\n                <input type=\"file\" id=\"fileInput\" style={{display:\"none\"}} onChange={(e)=>setFile(e.target.files[0])}/>\r\n            </div>\r\n            <label className=\"settingsLabel\">Kullanıcı Adı</label>\r\n            <input type=\"text\" placeholder={user.username}  onChange={(e)=>setUsername(e.target.value)} />\r\n            <label className=\"settingsLabel\">Email</label>\r\n            <input type=\"email\" placeholder={user.email}  onChange={(e)=>setEmail(e.target.value)}/>\r\n            <label className=\"settingsLabel\">Şifre</label>\r\n            <input type=\"password\" onChange={(e)=>setPassword(e.target.value)} />\r\n            <button className=\"settingsSubmit\" type=\"submit\">Güncelle</button>\r\n            {success && <span style={{color:\"green\", textAlign:\"center\", marginTop:\"20px\"}}>Profiliniz Güncellendi..</span>}\r\n            <span className=\"settingsDeleteTitle\">\r\n                Hesabı Sil\r\n            </span>\r\n        </form>\r\n      </div>\r\n    </div>\r\n    </>\r\n  )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}